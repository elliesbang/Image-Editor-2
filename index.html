<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ellie's Image Editor</title>
    <link rel="stylesheet" href="static/styles.css" />
  </head>
  <body>
    <header>
      <div class="header-inner">
        <div class="brand">Ellie's Image Editor</div>
        <span class="header-spacer"></span>
        <button type="button" class="btn-ghost" data-action="community">미치나 커뮤니티</button>
        <button type="button" data-action="login">로그인</button>
        <span class="credit-badge" data-credit-badge data-state="locked">로그인 필요</span>
      </div>
    </header>

    <section class="banner" data-session-banner>
      <div>
        <strong>관리자 로그인 완료</strong>
        <p style="margin:4px 0 0; color:#4a4a4a; font-size:0.9rem;">관리자 <span data-session-email></span>님, 대시보드를 현재 창에서 열거나 새 탭으로 확인할 수 있습니다.</p>
      </div>
      <div class="banner-actions">
        <button type="button" class="btn-secondary" data-action="open-dashboard" data-target="self">현재 페이지에서 열기</button>
        <button type="button" data-action="open-dashboard" data-target="blank">새 탭으로 열기</button>
      </div>
    </section>

    <main>
      <section class="page-section">
        <div class="editor-grid">
          <div class="editor-card">
            <h2>이미지 업로드</h2>
            <p>최대 50장까지 업로드하여 한 번에 편집할 수 있습니다.</p>
            <div class="upload-dropzone" data-dropzone>
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#1d1d1f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
              <p style="margin:0;">이미지를 드래그하거나 클릭해서 선택하세요.</p>
              <label class="button" style="margin-top:12px; display:inline-block;">
                파일 선택
                <input class="upload-input" type="file" accept="image/*" multiple data-upload />
              </label>
            </div>
            <div style="margin-top:20px; color:#5f6368; font-size:0.9rem;">PNG, JPG, WEBP 등을 지원하며, 업로드된 이미지는 브라우저에서만 처리됩니다.</div>
          </div>
          <div class="editor-card">
            <h3>편집 파이프라인</h3>
            <p>원하는 단계를 선택하고, 설정을 조정해 모든 이미지에 적용하세요.</p>
            <div class="pipeline-steps">
              <div class="pipeline-step">
                <label>
                  <input type="checkbox" data-step="remove-bg" checked />
                  배경 제거
                </label>
                <small>흰색 배경을 투명하게 전환합니다.</small>
              </div>
              <div class="pipeline-step">
                <label>
                  <input type="checkbox" data-step="tight-crop" checked />
                  타이트 크롭
                </label>
                <small>피사체 경계에 맞춰 자동 크롭합니다.</small>
              </div>
              <div class="pipeline-step">
                <label>
                  <input type="checkbox" data-step="denoise" checked />
                  노이즈 제거
                </label>
                <small>부드러운 3×3 필터로 노이즈를 완화합니다.</small>
              </div>
              <div class="pipeline-step">
                <label>
                  <input type="checkbox" data-step="svg" />
                  PNG → SVG 변환
                </label>
                <small>ImageTracer.js를 이용해 벡터 버전을 생성합니다.</small>
              </div>
            </div>
            <div class="resize-control" style="margin-top:24px;">
              <label for="resize-width">가로폭(px)</label>
              <input type="number" id="resize-width" data-resize-width value="1024" min="64" max="4096" step="16" />
              <small style="color:#5f6368;">해당 값보다 작은 이미지는 비율을 유지하며 확대됩니다.</small>
            </div>
            <div style="margin-top:24px; display:flex; gap:12px; flex-wrap:wrap;">
              <button type="button" data-action="apply-all">모든 이미지에 적용</button>
              <span class="badge" data-selected-count>0개 선택됨</span>
            </div>
          </div>
        </div>

        <div class="gallery">
          <div class="editor-card">
            <h3>미리보기</h3>
            <p>편집 결과는 아래 미리보기에서 확인할 수 있습니다. 각 이미지를 선택하여 ZIP 내보내기 대상을 지정하세요.</p>
            <div class="gallery-grid" data-gallery></div>
          </div>
        </div>
      </section>
    </main>

    <div class="actions-bar">
      <div class="actions-inner">
        <button type="button" class="btn-secondary" data-action="download-one">이미지 저장</button>
        <button type="button" data-action="download-selected">선택 ZIP</button>
        <button type="button" data-action="download-all">전체 ZIP</button>
      </div>
    </div>

    <footer>
      <div class="footer-inner">
        <div class="footer-links">
          <a href="privacy.html">Privacy</a>
          <a href="terms.html">Terms</a>
          <a href="cookies.html">Cookies</a>
        </div>
        <div style="display:flex; gap:12px; align-items:center;">
          <span style="font-size:0.85rem; color:#5f6368;">© Elliesbang Image Editor</span>
          <button type="button" class="btn-secondary" onclick="window.open('dashboard.html', '_blank', 'noopener');">관리자 전용</button>
        </div>
      </div>
    </footer>

    <script src="static/vendor/jszip.min.js"></script>
    <script src="static/vendor/imagetracer.min.js"></script>
    <script src="static/app.js"></script>
    <script src="static/editor.js"></script>
  </body>
</html>
